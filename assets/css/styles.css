:root{
  --bg:#0b0b0b; --surface:#121212; --surface-2:#101010;
  --on:#eaeaea; --muted:#a9a9a9; --outline:#232323;
  --primary:#1863bd; --primary-ghost:rgba(24,99,189,.12);
  --s-1:4px; --s0:8px; --s1:12px; --s2:16px; --s3:24px; --s4:32px;
  --radius:16px; --ease:cubic-bezier(.22,1,.36,1); --anim:240ms;
  --ok:#19a27b; --mid:#FFC400; --high:#FF5C33;
  --shadow:0 6px 24px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.03) inset;

  --gutter: var(--s2);
  --stack: var(--s2);
  --stack-sm: var(--s1);
}
*{box-sizing:border-box;font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
html,body{height:100%;margin:0;background:var(--bg);color:var(--on);overflow:hidden}
body{font-size:17px}

@media (prefers-reduced-motion: reduce){
  *{animation-duration:0.001ms!important;animation-iteration-count:1!important;transition-duration:0.001ms!important;scroll-behavior:auto!important}
}

/* Scroll oculto pero funcional */
.no-scrollbar, .panel, #eqScroll{overflow:auto;scrollbar-width:none}
.no-scrollbar::-webkit-scrollbar, .panel::-webkit-scrollbar, #eqScroll::-webkit-scrollbar{width:0;height:0}

.stack > * + *{ margin-top: var(--stack); }
.stack-sm > * + *{ margin-top: var(--stack-sm); }

.toolbar{display:flex;align-items:center;justify-content:space-between;height:72px;padding:0 var(--s3);background:#141414;border-bottom:1px solid var(--outline);position:sticky;top:0;z-index:30}
.toolbar-left{display:flex;align-items:center;gap:var(--s1)}
.brand{font-size:1.1rem;font-weight:700}
.beta-badge{font-size:.74rem;font-weight:700;color:var(--primary);border:1px solid var(--outline);background:var(--primary-ghost);padding:4px var(--s1);border-radius:8px;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}

.main{display:flex;height:calc(100vh - 72px);overflow:hidden}
#side{position:relative;width:480px;height:100%;background:var(--surface-2);padding:var(--gutter);border-right:1px solid var(--outline)}
#map{flex:1;height:100%;min-width:0}
@media (max-width:1024px){#side{width:440px}}
@media (max-width:900px){.main{flex-direction:column-reverse}#side{width:100%;height:48vh;padding:14px;border-right:0;border-top:1px solid var(--outline)}#map{height:52vh}}

.card{background:var(--surface);border:0.1px solid var(--outline);border-radius:15px;padding:var(--s2);box-shadow:var(--shadow)}
.card + .card{ margin-top: var(--stack); }
.card-title{margin:0;font-weight:700}

.row{display:flex;gap:var(--s1);align-items:center;flex-wrap:wrap}
.row-actions{width:100%;justify-content:flex-start}
.muted{color:var(--muted)}
.small{font-size:.92rem;line-height:1.45}
.links a.btn{max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:12px 18px;text-align:left;display:block;width:100%}
.notice{margin: var(--s1) 0 0; font-size:0.92rem; line-height:1.5; display:flex; align-items:center; padding: 8px 12px; background-color:#5b0000; border-radius: 15px; color:#fff}
.notice .material-icons{margin-right:8px}

.user-block{display:flex;flex-direction:column;gap:6px;min-width:0}
.user-title{margin:0;font-size:1.02rem}

.btn{background:#141414;color:#fff;border:1px solid var(--outline);border-radius:14px;padding:10px 16px;font-weight:500;cursor:pointer;display:inline-flex;gap:var(--s1);align-items:center;justify-content:flex-start;transition:transform .25s var(--ease),background .25s,border-color .25s; min-height:44px;font-size:1rem; letter-spacing:.2px}
.btn:hover{transform:translateY(-1px);background:#1b1b1b;border-color:#2d2d2d}
.btn:focus-visible{outline:2px solid #2a62c8; outline-offset:2px}
.btn.full{width:100%}
.btn-compact{padding:8px 12px; min-height:40px}
.btn-icon{width:42px;height:42px;display:inline-flex;align-items:center;justify-content:center;padding:0;border-radius:12px}

.icon-wifi{transition:color .2s ease}
.wifi-ok{color:#0c70c8 !important}
.wifi-off{color:#ff4336 !important}
.server-ok{color:var(--ok) !important}

.conn-row{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;width:100%}

.panel{position:absolute; inset:var(--gutter); display:block; opacity:1; transform:translateX(0); transition:opacity var(--anim) var(--ease), transform var(--anim) var(--ease); will-change:opacity,transform}
.panel.hidden{display:none!important}
.panel.enter{display:block;opacity:0;transform:translateX(18px)}
.panel.enter.show{opacity:1;transform:translateX(0)}
.panel.leave{opacity:1;transform:translateX(0)}
.panel.leave.done{opacity:0;transform:translateX(-18px)}
.panel.active{z-index:2}
.panel.inactive{z-index:1;pointer-events:none}

#panelList{display:flex;flex-direction:column}
.list-header-wrap{position:sticky;top:0;z-index:5;background:var(--surface-2);padding:3px 0 0;margin-bottom:5px}
.list-header{display:grid;grid-template-columns:1fr auto;align-items:center;gap:var(--s2);padding:16px 14px;border:1px solid var(--outline);background:var(--surface);border-radius:14px; box-shadow:var(--shadow)}
.lh-title{display:flex;flex-direction:column;gap:var(--s-1);min-width:0}
.lh-title h2{margin:0;font-size:1.08rem;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.lh-meta{color:#cfcfcf;font-size:.84rem}
.lh-actions{display:flex;gap:10px;align-items:center;justify-self:end}
.lh-actions .material-icons{font-size:20px}
@media (max-width:560px){.list-header{gap:8px;padding:14px 10px}.btn-icon{width:40px;height:40px}}

#eqScroll{flex:1;min-height:0}
.eq-card{background:var(--surface);border:1px solid var(--outline);border-radius:16px;padding:var(--s2);margin:var(--s1) 0;transition:background .2s,border-color .2s,transform .2s;contain: content; will-change: transform; transform: translateZ(0); box-shadow:var(--shadow)}
.eq-card:hover{background:#161616;border-color:#2a2a2a;transform:translateY(-1px)}
.eq-item{display:grid;grid-template-columns:88px minmax(0,1fr);gap:var(--s2);align-items:center}
.magbox{width:88px;height:88px;border-radius:14px;border:1px solid var(--outline);background:#161616;display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1;flex-shrink:0}
.magbox .t1,.magbox .t3{font-size:.72rem;letter-spacing:.6px;color:#cfcfcf}
.magbox .t2{font-weight:800;margin:2px 0;font-size:1.16rem}
.mag-ok .t2{color:var(--ok)} .mag-mid .t2{color:var(--mid)} .mag-high .t2{color:var(--high)}
.eq-text{min-width:0}
.title{font-weight:700;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;word-break:break-word;line-height:1.28;max-height:2.56em;margin-bottom:6px;font-size:1.02rem}
.meta{color:var(--muted);font-size:.92rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;word-break:break-word}
@media (max-width:560px){.eq-item{grid-template-columns:74px minmax(0,1fr)}.magbox{width:74px;height:74px}.title{font-size:1rem}.meta{font-size:.88rem}}

.avatar{width:46px;height:46px;border-radius:50%;object-fit:cover;border:1px solid var(--outline);background:#161616}
.avatar-icon{width:46px;height:46px;border-radius:50%;border:1px solid var(--outline);display:inline-flex;align-items:center;justify-content:center;background:#161616}
.avatar-icon .material-icons{font-size:28px;color:#8a8a8a}
.btn-conn{padding:9px 14px;min-height:40px;font-size:0.95rem}

#loadMoreWrap{display:flex;justify-content:center;padding:14px 0}
#side .card:last-of-type{ margin-bottom: var(--gutter); }

a.btn { text-decoration: none; }
a.btn:hover { text-decoration: none; }

/* Simulador */
.sim-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.sim-grid label{font-size:.92rem;color:#cfcfcf}
.sim-grid input{background:#1a1a1a;color:#fff;border:1px solid var(--outline);border-radius:10px;padding:10px;width:100%}
.sim-grid select{background:#1a1a1a;color:#fff;border:1px solid var(--outline);border-radius:10px;padding:10px;width:100%}
.badge{display:inline-flex;align-items:center;gap:6px;background:#16233a;border:1px solid #263a5d;padding:6px 10px;border-radius:999px;font-size:.85rem}

.sim-actions{grid-column:1/-1;display:flex;gap:12px;flex-wrap:wrap;width:100%}
.sim-actions .btn{flex:1 1 0; min-width:0; justify-content:center; text-align:center; white-space:normal}
.sim-actions .material-icons{flex-shrink:0}

.legend{display:flex;gap:10px;flex-wrap:wrap}
.legend-chip{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--outline);padding:6px 10px;border-radius:999px;background:#151515;font-size:.9rem}
.dot{width:10px;height:10px;border-radius:50%}
.dot-epic{background:#e63946;border:1px solid #fff}
.dot-user{background:#06d6a0;border:1px solid #fff}

/* Campos unificados */
input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0 }
input[type="number"]{ appearance: textfield; -moz-appearance: textfield }

input, select, textarea, .mdc-dialog input, .mdc-dialog select, .mdc-dialog textarea {
  background:#1a1a1a; color:var(--on); border:1px solid var(--outline); border-radius:10px; padding:10px 12px; outline:none;
  transition: border-color .2s var(--ease), box-shadow .2s var(--ease), background .2s var(--ease)
}
input:hover, select:hover, textarea:hover, .mdc-dialog input:hover, .mdc-dialog select:hover, .mdc-dialog textarea:hover{ background:#171717; border-color:#2d2d2d }
input:focus-visible, select:focus-visible, textarea:focus-visible, .mdc-dialog input:focus-visible, .mdc-dialog select:focus-visible, .mdc-dialog textarea:focus-visible { border-color:#2f2f2f; box-shadow: 0 0 0 3px rgba(255,255,255,0.04), inset 0 0 0 1px #2f2f2f }
::placeholder { color: #8d8d8d; opacity: 1 }
input:disabled, select:disabled, textarea:disabled { background:#151515; border-color:#1e1e1e; opacity:.6; cursor:not-allowed }
input:invalid, select:invalid { border-color:#3a2a2a; box-shadow:0 0 0 3px rgba(255,0,0,.05) }

/* Filters dialog form */
.filters-form{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);gap:12px;max-width:100%}
.filters-form .form-title{grid-column:1/-1;font-weight:700}
.filters-form .form-row{grid-column:1/-1}
